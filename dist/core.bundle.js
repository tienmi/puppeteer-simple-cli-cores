!function(){var t={220:function(t,e,o){const r=o(18),i=o(17).resolve("","./"),n=require(`${i}/src/main.config.js`),a=o(147),s=[],l={page:null,async log(t){n.saveLog&&(s.push(t),await a.promises.writeFile("log.json",JSON.stringify(s)))},ready:!1};t.exports=l,(async()=>{l.ready=!1,console.log("[45m","[Initialzation] Preparing","[0m"),l.log("Preparing...");let t=0;const e=n.config||{headless:!1,slowMo:50},o=await r.launch(e);let a=await o.newPage();l.page=a,n.getClientLog&&a.on("console",(t=>console.log("[Log]: ",t.text())));const s=async e=>{l.log(`Running step ${e.title}.`);try{const t=require(`${i}/src${e.path}`);await t(),console.log("[42m","[Step]","[0m",e.title,"[32m","done.","[0m"),l.log(`Step ${e.title} success!`)}catch(o){if(console.log("[41m","[Error]","[0m",e.title,"[31m",o,"[0m"),l.log(`[Error] ${e.title} - ${o}`),t<n.retry){l.log(`Step ${e.title} retry.`),console.log("[44m","[Step]","[0m",e.title,"[34m","retry.","[0m"),t++;const o=a.waitForNavigation();await a.goto(n.targetURL),await o,await s(e)}}};await(async()=>{for(const t of n.pipelines){console.log("[44m","[Step]","[0m",t.title,"[34m","start.","[0m");const e=a.waitForNavigation();await a.goto(n.targetURL),await e,await s(t)}})(),l.ready=!0,l.log("Job end!"),console.log("[45m","[End]","[0m"),o.close()})()},18:function(t){"use strict";t.exports=require("puppeteer")},147:function(t){"use strict";t.exports=require("fs")},17:function(t){"use strict";t.exports=require("path")}},e={},o=function o(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}(220);module.exports=o}();